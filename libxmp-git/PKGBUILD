# Maintainer: Bas Magr√© <Opvolger@gmail.com>

pkgname='libxmp-git'
pkgver=4.4.1.r161.g92313f6f
pkgrel='1'
pkgdesc="Libxmp is a library that renders module files to PCM data. It supports over 90 mainstream and obscure module formats."
arch=('any')
url="https://github.com/cmatsuoka/libxmp"
license=('GNU')
depends=('sdl' 'libvorbis' 'curl' 'sdl_net' 'sdl_image' 'sdl_mixer')
makedepends=('git')
source=('git+https://github.com/cmatsuoka/libxmp.git')
md5sums=('SKIP')

pkgver() {
  cd "$pkgname"
  git describe --long --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
}

prepare() {
  cd "${srcdir}/libxmp"
  autoconf
}

build() {
  cd "${srcdir}/libxmp"
  ./configure --prefix=/usr  
  make
}

check() {
  cd "${srcdir}/libxmp"
  make check
}

package() {
  cd "${srcdir}/libxmp"
  make install
}
